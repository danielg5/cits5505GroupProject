<!DOCTYPE html>
<html lang="en">
    <title>Super Wordle Game</title>
    <meta charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link 
      rel="stylesheet" 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.css" 
      integrity="sha384-qAlWxD5RDF+aEdUc1Z7GR/tE4zYjX1Igo/LrIexlnzM6G63a6F1fXZWpZKSrSW86" 
      crossorigin="anonymous">
    <!--
    <link 
      rel="stylesheet" 
      href="myStyle.css">
    -->
    <script 
      src="https://code.jquery.com/jquery-3.7.1.js" 
      integrity="sha384-wsqsSADZR1YRBEZ4/kKHNSmU+aX8ojbnKUMN4RyD3jDkxw5mHtoe2z/T/n4l56U/" 
      crossorigin="anonymous"></script>
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.js" 
      integrity="sha384-jYoAmFjufJZfBzwTARyz2gk7Jj9mQb2cLeP9n5PcgLCVVd+8QfjY1+qFj+rBkViV" 
      crossorigin="anonymous"></script>
</head>
<body>
    <form>
        <label for="wordGuess">Word Guess:</label><br>
        <input type="text" id="wordGuess" name="wordGuess">
        <button type="button" onclick="wordInput()">Submit</button>
    </form>
    <p>Do not use 'enter' key. Please use &lt;submit&gt; button.</p><br>

    <div id="printGuess"><p>Guess goes here!</p></div>

    <div id="printTable"><p>Table goes here!</p></div>

    <script>
      function wordle (word1, word2) {
        // Find all matches of word2 letters in word1.
        // Repeated letters in word2 cannot be matched more times than it
        // appears in word1. For example: word1 = "craze" and word2 = "trees",
        // the second 'e' in word2 is ignored as 'e' only appears once in word1.
        
        const word1Arr = word1.split("");
        
        // create an array to store matches in word2
        const word2MatchArr = [];

        // Step 1, find all matches in same position.
        // Cannot combined boths steps in a nested 'for' loop
        // because step 1 needs to complete before step 2.
        for (let i = 0; i < word2.length; i++) {
          if (word2.at(i) == word1.at(i)) {
              word2MatchArr[i] = 2;
              // remove matched letter (required for second step)
              word1Arr[i] = '_'; 
          } else {
              word2MatchArr[i] = 0;
          }
        }

        // Step 2, find all matches in different position.
        // Separate loop to account for wordle treatment of duplicate letters,
        // where duplicated matches from letters repeated in word2 are ignored
        for (let i = 0; i < word2.length; i++) {
          for (let j = 0; j < word1.length; j++) {
            if (word2.at(i) == word1Arr[j] && word2MatchArr[i] != 2){
                word2MatchArr[i] = 1;
                // remove matched letter
                word1Arr[j] = '_'; 
              } 
            }
          }
        console.log(word2MatchArr.toString());
        $("#printGuess").html('<p>' + 'Your word guess: ' + word2 + '; The secret word was: ' + word1 + '; Wordle function output: ' + word2MatchArr.toString() + '<p>');
        }
      function drawTable() {

      }

      function wordInput() {
        let wordGuess = document.getElementById("wordGuess").value.toLowerCase();
        let secretWord = "craze";

        if (secretWord.length == wordGuess.length) {
            // alert("Using wordle() function");
            wordle(secretWord, wordGuess);    
        } else {
            alert("Word length must be " + secretWord.length + " characters long. Please try again.");
        }
    
            
      } 
    </script>
</body>
</html>